<app-storageaccount-detail #detail (updated)="ngOnChange($event)"></app-storageaccount-detail>
<form [formGroup]="newTranscriptForm"  (ngSubmit)="onSubmit(newTranscriptForm.value)">
  <fieldset>

    <div>
    <label>Select File</label>
    <select  formControlName="audiofile" [(ngModel)]="transcriptDef.recordingsUrl">
      <option *ngFor="let file of audioFiles" >{{file.name}}</option>
    </select>
  </div>
  <div>
    <label>Title</label>
    <input type="text"formControlName="title"  [(ngModel)]="transcriptDef.name"/>
  </div>
  <div>
    <label>Description</label>
    <input type="text" formControlName="description" [(ngModel)]="transcriptDef.description"/>
  </div>

  </fieldset>
 <button type="button" (click)="toggleAdvanced($event)">{{showAdvancedText}}</button>
 <fieldset *ngIf="showAdvanced">
 <div><label>Locale</label>
  <select  [(ngModel)]="transcriptDef.locale" formControlName="locale">
    <option>en-US</option>
    <option>en-AU</option>
  </select>
</div>
<div>
  <label>Diarization</label><input type="checkbox" formControlName="diarization"  [(ngModel)]="transcriptDef.properties.AddDiarization"/>
</div>
<div>
  <label>Sentiment</label> <input type="checkbox" formControlName="sentiment"  [(ngModel)]="transcriptDef.properties.AddSentiment"/>
</div>
<div>
  <label>Word Level Time Stamps</label> <input type="checkbox" formControlName="addwordleveltimestamps"  [(ngModel)]="transcriptDef.properties.AddWordLevelTimestamps"/>
</div>
<div>
  <label>Punctuation Mode</label>
  <select  formControlName="punctuation" [(ngModel)]="transcriptDef.properties.PunctuationMode">
    <option *ngFor="let c of punctuationOptions" value={{c}}> {{c}} </option>
  </select>
</div>
<div>
  <label>Profanity filter mode</label>
  <select formControlName="profanity"  [(ngModel)]="transcriptDef.properties.ProfanityFilterMode">
    <option *ngFor="let c of profanityOptions" value={{c}}> {{c}} </option>
  </select>
</div>
</fieldset>
<input type="submit" name="submit" value="submit"/>
</form>
<table>
  <tr><th>Created</th><th>Title</th><th>Description</th><th>Status</th><th>Locale</th><th>Properties</th><th>Actions</th></tr>
  <tr *ngFor="let tran of transcriptions">
    <td>{{tran.createdDateTime | date:'short'}}</td>
    <td>{{tran.name}}</td>
    <td>{{tran.description}}</td>
    <td>{{tran.status}}:{{tran.statusMessage}}</td>
    <td>{{tran.locale}}</td>
    <td><span *ngFor="let item of tran.properties | keyvalue"> {{item.key}}:{{item.value}}</span></td>
    <td><button [routerLink]="['/transcripts',tran.id]">Open</button><button>Delete</button></td>
  </tr>
</table>

